<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <title>قیمت ارز و طلا</title>
  <link rel="icon" href="https://example.com/icon.ico" type="image/x-icon" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.fontcdn.ir/Font/Persian/Vazir/Vazir.css" rel="stylesheet" />
  <style>
    body {
      font-family: Vazir, sans-serif;
      background-image: url('https://example.com/background.jpg');
      background-size: cover;
      background-position: center;
    }

    .price {
      opacity: 0;
      animation: fadeIn 1s forwards;
    }

    @keyframes fadeIn {
      100% {
        opacity: 1;
      }
    }

    .card {
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .price-container {
      background-color: rgba(255, 255, 255, 0.9);
      border-radius: 8px;
      padding: 15px;
    }
  </style>
</head>

<body class="p-8 text-gray-800">

  <div class="max-w-xl mx-auto bg-white rounded-lg shadow-lg p-6 space-y-4 price-container">
    <h1 class="text-2xl font-bold text-center">قیمت لحظه‌ای</h1>

    <div class="space-y-2 text-right" id="prices">
      <div class="p-3 bg-blue-100 rounded price">دلار: <span id="usd">در حال بارگذاری...</span></div>
      <div class="p-3 bg-green-100 rounded price">مثقال طلا: <span id="gold">در حال بارگذاری...</span></div>
      <div class="p-3 bg-yellow-100 rounded price">سکه: <span id="coin">در حال بارگذاری...</span></div>
      <div class="p-3 bg-purple-100 rounded price">تتر: <span id="usdt">در حال بارگذاری...</span></div>
      <div class="p-3 bg-pink-100 rounded price">بیت‌کوین: <span id="btc">در حال بارگذاری...</span></div>
      <div class="p-3 bg-teal-100 rounded price">اتریوم: <span id="eth">در حال بارگذاری...</span></div>
    </div>

    <div class="text-center">
      <button onclick="fetchPrices()"
        class="p-2 bg-blue-500 text-white rounded hover:bg-blue-700 transition duration-200">بروزرسانی قیمت‌ها</button>
    </div>

    <div class="text-center mt-4">
      <p>تاریخ و زمان به‌روز: <span id="current-time">در حال بارگذاری...</span></p>
      <br>
      <p style="color: rgb(209, 209, 209);">Developed by Mehran Mirzaei</p>
    </div>
  </div>

  <script>
    function formatNumber(num) {
      return Number(num).toLocaleString('fa-IR');
    }

    async function fetchPrices() {
      const response = await fetch("/api/prices");
      const response_2 = await fetch("/api/crypto");
      const data = await response.json();
      const data_2 = await response_2.json();
      document.getElementById('usd').innerText = formatNumber(data.usd / 10) + ' تومان';
      document.getElementById('gold').innerText = formatNumber(data.gold / 10) + ' تومان';
      document.getElementById('coin').innerText = formatNumber(data.coin / 10) + ' تومان';
      document.getElementById('usdt').innerText = formatNumber(data_2.usdt / 10) + ' تومان';
      document.getElementById('btc').innerText = formatNumber(data_2.btc / 10) + ' تومان';
      document.getElementById('eth').innerText = formatNumber(data_2.eth / 10) + ' تومان';
    }

    function updateTime() {
      const now = new Date();
      const timeString = now.toLocaleTimeString('fa-IR');
      document.getElementById('current-time').innerText = timeString;
    }

    fetchPrices();
    setInterval(fetchPrices, 30000); // بروزرسانی هر 30 ثانیه
    setInterval(updateTime, 1000); // بروزرسانی ساعت هر 1 ثانیه
  </script>
</body>

</html>